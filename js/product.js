!function(){"use strict";var t={};t.favToggles=document.querySelectorAll(".fav-toggle"),t.lazyOnlyImgs=document.querySelectorAll("img.lazy:not(.zoom)"),t.lazyZoomImgs=document.querySelectorAll("img.lazy.zoom"),t.menu=document.querySelector("nav .menu"),t.menuToggle=document.querySelector("nav .menu-toggle"),t.modal=document.querySelector(".modal"),t.modalCvs=document.querySelector(".modal-cvs"),t.products=document.querySelectorAll(".product"),t.zoomOnlyImgs=document.querySelectorAll("img.zoom:not(.lazy)");var e=void 0,o=void 0,n=function(t){var n=t.srcElement,c=n.getAttribute("data-product-id"),d=e.indexOf(c);d>=0?(e.splice(d,1),n.classList.remove("on")):(e.push(c),n.classList.add("on")),function(){try{localStorage.setItem("favs",JSON.stringify(e))}catch(t){console.log(t)}}(),o.forEach(function(t){return a(t)})},a=function(t){e.indexOf(t.getAttribute("data-product-id"))>=0?t.classList.add("fav"):t.classList.remove("fav")},c=function(t,c){o=c||[],function(){try{e=JSON.parse(localStorage.getItem("favs"))||[]}catch(t){console.log(t),e=[]}}(),d=t,o.forEach(function(t){return a(t)}),d.forEach(function(t){e.indexOf(t.getAttribute("data-product-id"))>=0&&t.classList.add("on"),t.addEventListener("click",n)});var d},d=function(t,e){return t.forEach(function(t){return function(t,e){var o=document.createElement("img");o.setAttribute("src",t.getAttribute("data-src")),o.addEventListener("load",function(t,e,o){t.classList.add("loaded"),t.setAttribute("src",e.getAttribute("src")),t.removeAttribute("data-src"),o&&o(t)}.bind(null,t,o,e));var n=document.createElement("canvas"),a=n.getContext("2d"),c=[t.naturalWidth,t.naturalHeight];n.width=c[0],n.height=c[1],a.filter="blur(2px)",a.drawImage(t,0,0,c[0],c[1]),t.classList.contains("loaded")||t.setAttribute("src",n.toDataURL())}(t,e)})},l=!1,r=function e(){l?(document.body.classList.remove("modal-small-on"),t.menu.classList.remove("on"),t.modal.removeEventListener("click",e),l=!1):(document.body.classList.add("modal-small-on"),t.menu.classList.add("on"),t.modal.addEventListener("click",e),l=!0)},s=function(){t.menuToggle.addEventListener("click",r)},i=void 0,m=void 0,u=0,v=function(){document.body.classList.add("modal-big-on"),t.modal.classList.add("zoom"),t.modalCvs.classList.add("on")},f=function(){document.body.classList.remove("modal-big-on"),t.modal.classList.remove("zoom"),t.modalCvs.classList.remove("on")},g=function(){2===u&&(t.modal.removeEventListener("click",y),f(),u=0)},L=function(e){var o=[e.naturalWidth,e.naturalHeight];t.modalCvs.width=o[0],t.modalCvs.height=o[1],m.drawImage(e,0,0,o[0],o[1])},y=function e(o){0===u?(L(o.srcElement),t.modal.addEventListener("click",e),v(),(i=t.modalCvs.animate([{transform:"scale(0)"},{transform:"scale(1)"}],{duration:400,easing:"ease-out"})).addEventListener("finish",g),u++):1===u&&(i.reverse(),u++)},E=function e(o){u?(t.modal.addEventListener("click",e),f(),u=0):(L(o.srcElement),t.modal.addEventListener("click",e),v(),u=1)},h=function(e){m=t.modalCvs.getContext("2d"),void 0===Element.prototype.animate?e.forEach(function(t){return t.addEventListener("click",E)}):e.forEach(function(t){return t.addEventListener("click",y)})};window.addEventListener("load",function(){s(),c(t.favToggles,t.products),d(t.lazyOnlyImgs),d(t.lazyZoomImgs,function(t){return h([t])}),h(t.zoomOnlyImgs)})}();